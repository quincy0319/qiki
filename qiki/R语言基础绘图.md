# R语言基础绘图

R语言有丰富的绘图能力，本文介绍了R语言基础绘图包的功能。

## 1 创建图形

### 1.1 基础图形系统的核心：plot()函数

``` {r}
        plot(c(1, 2, 3), c(1, 2, 4))
```
执行完这条命令后将弹出绘图窗口，绘出点对(1, 1)、(2,2)、(3, 4)。

```{r}
        plot(c(-3, 3), c(-1, 5), type = "n", xlab = "x", ylab="y")
```

这条命令将绘制x和y坐标轴，横轴的范围是从-3到3，纵轴的范围是-1到5，参数type = "n"的含义
是不要向图中添加任何元素。

### 1.2 添加线条：abline()函数

```{r}
        x <- c(1, 2, 3)
        y <- c(1, 3, 8)
        plot(x, y)
        lmout <- (y ~ x)
        abline(lmout)
```
在散点图中添加拟合曲线。

```{r}
        lines(c(1.5, 2.5), c(3, 3))
```
将(1.5, 2.5)和(3, 3)两个点用直线连接起来。

```{r}
        plot(x, y, type = "l")
```
仅画出线条而不降其中的连接点绘制出来。

可以使用lty参数指定线条的类型，查看所有可用的类型可以查看：
```{r}
        help(par)
```

### 1.3 在保持现有图形的基础上新增一个绘图窗口

在windows下，执行windows()。

### 1.4 添加点：points()函数

```{r}
        points(testscores$exam1, testscores$exam3, pch = "+")
```

points()函数可以向现有的图中添加一系列点对。可以通过以下命令将背景修改为黄色：

```{r}
        par(bg = "yellow")
```

### 1.5 添加图例：legend()函数

legend()函数用来向拥有多条曲线的图中添加图例。

### 1.6 添加文字：text()函数

```{r}
        text(2.5, 4, "abc")
```

这将会在(2.5, 4)的位置加上文字“abc”。

### 1.7 精确定位：locator()函数

```{r}
        locator(1)
```
每当点击一次，R都会告诉你所点位置的精准坐标。借此可以实现在指定位置添加文字的功能：

```{r}
        text(locator(1), "nv = 75")
```

### 1.8 保存图形

```{r}
        recordPlot()
        replayPlot()
```

使用以上的两个函数来实现保存图形和恢复图形的动作。


## 2 定制图形

### 2.1 改变字符大小：cex选项

cex用于放大或缩小图形中的字符，“cex = 1.5”表明其字号为正常字号的1.5倍。

### 2.2 改变坐标轴的范围：xlim和ylim

希望图中x轴或y轴的范围比默认情形下更大或更小时使用，在同一张图中展示若干条曲线时非常有用，
相当于预留出了坐标轴的空间。

### 2.3 添加多边形：polygon()

使用polygon()函数来绘制任意形状的多边形。

```{r}
        f <- function(x) return(1 - exp(x))
        curve(f, 0, 2)
        polygon(c(1.2, 1.4, 1.4, 1.2), c(0, 0, f(1, 3), f(1, 3)), col = "gray")
```

上述函数中，第一个参数是矩阵各顶点的横坐标，第二个参数是矩阵各顶点的纵坐标，第三个参数设
定该矩形应该用纯灰色着色。

### 2.4 平滑散点

为数据拟合出一条平滑的非参数回归线（如lowess()）。

```{r}
        plot(testscores)
        lines(lowess(testscores))
```

### 2.5 绘制具有显式表达式的函数


## 3 将图形保存到文件

### 3.1 保存已显示图形

```{r}
        dev.set(2)
        dev.copy(which = 3)
```

将当前屏幕重新设置为活动设备，然后将其内容复制到PDF设备（编号3）。

### 3.2 关闭R图形设备

```{r}
        dev.set(3)
        dev.off()
```


本文均摘自《R语言编程艺术》。